<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OpenCensus::Trace::SpanContext
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "OpenCensus::Trace::SpanContext";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../OpenCensus.html" title="OpenCensus (module)">OpenCensus</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Trace.html" title="OpenCensus::Trace (module)">Trace</a></span></span>
     &raquo; 
    <span class="title">SpanContext</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OpenCensus::Trace::SpanContext
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OpenCensus::Trace::SpanContext</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/opencensus/trace/span_context.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Span represents a span in a trace record. Spans are contained in a trace
and arranged in a forest. That is, each span may be a root span or have a
parent span, and may have zero or more children.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="SpanContext/TraceData.html" title="OpenCensus::Trace::SpanContext::TraceData (class)">TraceData</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  <dl class="constants">
    
      <dt id="MAX_TRACE_ID-constant" class="">MAX_TRACE_ID =
        <div class="docstring">
  <div class="discussion">
    
<p>Maximum integer value for a `trace_id`</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='int'>0xffffffffffffffffffffffffffffffff</span></pre></dd>
    
      <dt id="MAX_SPAN_ID-constant" class="">MAX_SPAN_ID =
        <div class="docstring">
  <div class="discussion">
    
<p>Maximum integer value for a `span_id`</p>


  </div>
</div>
<div class="tags">
  

</div>
      </dt>
      <dd><pre class="code"><span class='int'>0xffffffffffffffff</span></pre></dd>
    
  </dl>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent-instance_method" title="#parent (instance method)">#<strong>parent</strong>  &#x21d2; SpanContext<sup>?</sup> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The parent of this context, or `nil` if this is a root context.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#span_id-instance_method" title="#span_id (instance method)">#<strong>span_id</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The span ID as a 16-character hex string, or the empty string if the
context refers to the root of the trace.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_root-class_method" title="create_root (class method)">.<strong>create_root</strong>(trace_context: nil)  &#x21d2; SpanContext </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new root SpanContext object, given either a Trace-Context header
value by itself, or an entire Rack environment.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_contained_spans-instance_method" title="#build_contained_spans (instance method)">#<strong>build_contained_spans</strong>  &#x21d2; Array&lt;Span&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Builds all finished spans under this context, and returns an array of built
`Span` objects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#contained_span_builders-instance_method" title="#contained_span_builders (instance method)">#<strong>contained_span_builders</strong>  &#x21d2; Array&lt;SpanBuilder&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns all SpanBuilder objects created by this context or any descendant
context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#contains%3F-instance_method" title="#contains? (instance method)">#<strong>contains?</strong>(context)  &#x21d2; boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if this context equals or is an ancestor of the given context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#end_span-instance_method" title="#end_span (instance method)">#<strong>end_span</strong>(span)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Finish the given span, which must have been created by this span context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#in_span-instance_method" title="#in_span (instance method)">#<strong>in_span</strong>(name, skip_frames: 0, sampler: nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new span in this context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(trace_data, parent, span_id)  &#x21d2; SpanContext </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize a SpanContext object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#root-instance_method" title="#root (instance method)">#<strong>root</strong>  &#x21d2; SpanContext </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The root context, which may be this context or one of its ancestors.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#root%3F-instance_method" title="#root? (instance method)">#<strong>root?</strong>  &#x21d2; boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns true if this is a root span context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sampled%3F-instance_method" title="#sampled? (instance method)">#<strong>sampled?</strong>  &#x21d2; boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Whether the context (e.g. the parent span) has been sampled.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_span-instance_method" title="#start_span (instance method)">#<strong>start_span</strong>(name, skip_frames: 0, sampler: nil)  &#x21d2; SpanBuilder </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new span in this context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#this_span-instance_method" title="#this_span (instance method)">#<strong>this_span</strong>  &#x21d2; SpanBuilder<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the span that defines this context; that is, the span that is the
parent of spans created by this context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trace_context-instance_method" title="#trace_context (instance method)">#<strong>trace_context</strong>  &#x21d2; TraceContextData </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the trace context for this span.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trace_id-instance_method" title="#trace_id (instance method)">#<strong>trace_id</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The trace ID, as a 32-character hex string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trace_options-instance_method" title="#trace_options (instance method)">#<strong>trace_options</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The original trace options byte used to create this span context.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(trace_data, parent, span_id)  &#x21d2; <tt><span class='object_link'><a href="" title="OpenCensus::Trace::SpanContext (class)">SpanContext</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initialize a SpanContext object. This low-level constructor is used
internally only. Generally, you should create a SpanContext using the
`SpanContext.create_root` method.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


243
244
245
246
247</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 243</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span> <span class='id identifier rubyid_trace_data'>trace_data</span><span class='comma'>,</span> <span class='id identifier rubyid_parent'>parent</span><span class='comma'>,</span> <span class='id identifier rubyid_span_id'>span_id</span>
  <span class='ivar'>@trace_data</span> <span class='op'>=</span> <span class='id identifier rubyid_trace_data'>trace_data</span>
  <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='id identifier rubyid_parent'>parent</span>
  <span class='ivar'>@span_id</span> <span class='op'>=</span> <span class='id identifier rubyid_span_id'>span_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="parent-instance_method">
  
    #<strong>parent</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="OpenCensus::Trace::SpanContext (class)">SpanContext</a></span></tt><sup>?</sup>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The parent of this context, or `nil` if this is a root context.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="OpenCensus::Trace::SpanContext (class)">SpanContext</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parent'>parent</span>
  <span class='ivar'>@parent</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="span_id-instance_method">
  
    #<strong>span_id</strong>  &#x21d2; <tt>String</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The span ID as a 16-character hex string, or the empty string if the
context refers to the root of the trace.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid_span_id'>span_id</span>
  <span class='ivar'>@span_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create_root-class_method">
  
    .<strong>create_root</strong>(trace_context: nil)  &#x21d2; <tt><span class='object_link'><a href="" title="OpenCensus::Trace::SpanContext (class)">SpanContext</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new root SpanContext object, given either a Trace-Context header
value by itself, or an entire Rack environment. If a valid Trace-Context
header can be obtained from either source, it is used to generate the
SpanContext. Otherwise, a new root context with a unique `trace_id` and a
root `span_id` of “” is used.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>trace_context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="TraceContextData.html" title="OpenCensus::Trace::TraceContextData (class)">TraceContextData</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The request&#39;s incoming trace context (optional)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="OpenCensus::Trace::SpanContext (class)">SpanContext</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64
65
66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_root'>create_root</span> <span class='label'>trace_context:</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_trace_context'>trace_context</span>
    <span class='id identifier rubyid_trace_data'>trace_data</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="SpanContext/TraceData.html" title="OpenCensus::Trace::SpanContext::TraceData (class)">TraceData</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="OpenCensus::Trace::SpanContext#initialize (method)">new</a></span></span> \
      <span class='id identifier rubyid_trace_context'>trace_context</span><span class='period'>.</span><span class='id identifier rubyid_trace_id'>trace_id</span><span class='comma'>,</span> <span class='id identifier rubyid_trace_context'>trace_context</span><span class='period'>.</span><span class='id identifier rubyid_trace_options'>trace_options</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_trace_data'>trace_data</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_trace_context'>trace_context</span><span class='period'>.</span><span class='id identifier rubyid_span_id'>span_id</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_trace_id'>trace_id</span> <span class='op'>=</span> <span class='id identifier rubyid_rand'>rand</span> <span class='int'>1</span><span class='op'>..</span><span class='const'><span class='object_link'><a href="#MAX_TRACE_ID-constant" title="OpenCensus::Trace::SpanContext::MAX_TRACE_ID (constant)">MAX_TRACE_ID</a></span></span>
    <span class='id identifier rubyid_trace_id'>trace_id</span> <span class='op'>=</span> <span class='id identifier rubyid_trace_id'>trace_id</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='lparen'>(</span><span class='int'>16</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_rjust'>rjust</span><span class='lparen'>(</span><span class='int'>32</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_trace_data'>trace_data</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="SpanContext/TraceData.html" title="OpenCensus::Trace::SpanContext::TraceData (class)">TraceData</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="OpenCensus::Trace::SpanContext#initialize (method)">new</a></span></span> <span class='id identifier rubyid_trace_id'>trace_id</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_trace_data'>trace_data</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="build_contained_spans-instance_method">
  
    #<strong>build_contained_spans</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="Span.html" title="OpenCensus::Trace::Span (class)">Span</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Builds all finished spans under this context, and returns an array of built
`Span` objects. Ignores any unfinished spans. The order of the generated
spans is undefined.</p>

<p>Does not build any ancestor spans. If you want the entire span tree built,
call this method on the `#root` context.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="Span.html" title="OpenCensus::Trace::Span (class)">Span</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Built Span objects</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


232
233
234</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 232</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_contained_spans'>build_contained_spans</span>
  <span class='id identifier rubyid_contained_span_builders'>contained_span_builders</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:finished?</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_span</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="contained_span_builders-instance_method">
  
    #<strong>contained_span_builders</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="SpanBuilder.html" title="OpenCensus::Trace::SpanBuilder (class)">SpanBuilder</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns all SpanBuilder objects created by this context or any descendant
context. The order of the returned spans is undefined.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="SpanBuilder.html" title="OpenCensus::Trace::SpanBuilder (class)">SpanBuilder</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273
274
275
276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 271</span>

<span class='kw'>def</span> <span class='id identifier rubyid_contained_span_builders'>contained_span_builders</span>
  <span class='id identifier rubyid_builders'>builders</span> <span class='op'>=</span> <span class='ivar'>@trace_data</span><span class='period'>.</span><span class='id identifier rubyid_span_map'>span_map</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_root?'>root?</span>
    <span class='id identifier rubyid_builders'>builders</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_builders'>builders</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sb'>sb</span><span class='op'>|</span> <span class='id identifier rubyid_contains?'>contains?</span> <span class='id identifier rubyid_sb'>sb</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="contains?-instance_method">
  
    #<strong>contains?</strong>(context)  &#x21d2; <tt>boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if this context equals or is an ancestor of the given context.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


256
257
258
259
260
261
262</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 256</span>

<span class='kw'>def</span> <span class='id identifier rubyid_contains?'>contains?</span> <span class='id identifier rubyid_context'>context</span>
  <span class='kw'>until</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_context'>context</span> <span class='op'>==</span> <span class='kw'>self</span>
    <span class='id identifier rubyid_context'>context</span> <span class='op'>=</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span>
  <span class='kw'>end</span>
  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="end_span-instance_method">
  
    #<strong>end_span</strong>(span)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Finish the given span, which must have been created by this span context.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>span</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SpanBuilder.html" title="OpenCensus::Trace::SpanBuilder (class)">SpanBuilder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The span to finish.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205
206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_end_span'>end_span</span> <span class='id identifier rubyid_span'>span</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_span'>span</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span> <span class='op'>==</span> <span class='kw'>self</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The given span was not created by this context</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_span'>span</span><span class='period'>.</span><span class='id identifier rubyid_finish!'>finish!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="in_span-instance_method">
  
    #<strong>in_span</strong>(name, skip_frames: 0, sampler: nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new span in this context. You must pass a name for the span. All
other span attributes should be set using the SpanBuilder methods.</p>

<p>The span will be started automatically with the current timestamp. The
SpanBuilder will then be passed to the block you provide. The span will be
finished automatically at the end of the block.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Name of the span</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sampler</span>
      
      
        <span class='type'>(<tt>Sampler</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Span-scoped sampler. If not provided, defaults to the trace
configuration&#39;s default sampler.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190
191
192
193
194
195</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 188</span>

<span class='kw'>def</span> <span class='id identifier rubyid_in_span'>in_span</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>skip_frames:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>sampler:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_span'>span</span> <span class='op'>=</span> <span class='id identifier rubyid_start_span'>start_span</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>skip_frames:</span> <span class='id identifier rubyid_skip_frames'>skip_frames</span> <span class='op'>+</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>sampler:</span> <span class='id identifier rubyid_sampler'>sampler</span>
  <span class='kw'>begin</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_span'>span</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_end_span'>end_span</span> <span class='id identifier rubyid_span'>span</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="root-instance_method">
  
    #<strong>root</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="OpenCensus::Trace::SpanContext (class)">SpanContext</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The root context, which may be this context or one of its ancestors.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="OpenCensus::Trace::SpanContext (class)">SpanContext</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94
95
96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_root'><span class='object_link'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span></span>
  <span class='id identifier rubyid_root'><span class='object_link'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span></span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='kw'>until</span> <span class='lparen'>(</span><span class='id identifier rubyid_parent'>parent</span> <span class='op'>=</span> <span class='id identifier rubyid_root'><span class='object_link'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parent'>parent</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_root'><span class='object_link'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span></span> <span class='op'>=</span> <span class='id identifier rubyid_parent'>parent</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_root'><span class='object_link'><a href="../../top-level-namespace.html" title="Top Level Namespace (root)">root</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="root?-instance_method">
  
    #<strong>root?</strong>  &#x21d2; <tt>boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns true if this is a root span context</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 83</span>

<span class='kw'>def</span> <span class='id identifier rubyid_root?'>root?</span>
  <span class='id identifier rubyid_parent'>parent</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sampled?-instance_method">
  
    #<strong>sampled?</strong>  &#x21d2; <tt>boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Whether the context (e.g. the parent span) has been sampled. This
information may be used in sampling decisions for new spans.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sampled?'>sampled?</span>
  <span class='id identifier rubyid_span'>span</span> <span class='op'>=</span> <span class='id identifier rubyid_this_span'>this_span</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_span'>span</span>
    <span class='id identifier rubyid_span'>span</span><span class='period'>.</span><span class='id identifier rubyid_sampled'>sampled</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_trace_options'>trace_options</span> <span class='op'>&amp;</span> <span class='int'>0x01</span> <span class='op'>!=</span> <span class='int'>0</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_span-instance_method">
  
    #<strong>start_span</strong>(name, skip_frames: 0, sampler: nil)  &#x21d2; <tt><span class='object_link'><a href="SpanBuilder.html" title="OpenCensus::Trace::SpanBuilder (class)">SpanBuilder</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new span in this context. You must pass a name for the span. All
other span attributes should be set using the SpanBuilder methods. The span
will be started automatically with the current timestamp. However, you are
responsible for finishing the span yourself.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Name of the span</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sampler</span>
      
      
        <span class='type'>(<tt>Sampler</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Span-scoped sampler. If not provided, defaults to the trace
configuration&#39;s default sampler.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SpanBuilder.html" title="OpenCensus::Trace::SpanBuilder (class)">SpanBuilder</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A SpanBuilder object that you can use to set span attributes and create
children.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 164</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_span'>start_span</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>skip_frames:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='label'>sampler:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_child_context'>child_context</span> <span class='op'>=</span> <span class='id identifier rubyid_create_child'>create_child</span>
  <span class='id identifier rubyid_sampler'>sampler</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../OpenCensus.html" title="OpenCensus (module)">OpenCensus</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Trace.html" title="OpenCensus::Trace (module)">Trace</a></span></span><span class='period'>.</span><span class='id identifier rubyid_config'><span class='object_link'><a href="../Trace.html#config-class_method" title="OpenCensus::Trace.config (method)">config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default_sampler'>default_sampler</span>
  <span class='id identifier rubyid_sampled'>sampled</span> <span class='op'>=</span> <span class='id identifier rubyid_sampler'>sampler</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='label'>span_context:</span> <span class='kw'>self</span>
  <span class='id identifier rubyid_span'>span</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="SpanBuilder.html" title="OpenCensus::Trace::SpanBuilder (class)">SpanBuilder</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="SpanBuilder.html#initialize-instance_method" title="OpenCensus::Trace::SpanBuilder#initialize (method)">new</a></span></span> <span class='id identifier rubyid_child_context'>child_context</span><span class='comma'>,</span> <span class='id identifier rubyid_sampled'>sampled</span><span class='comma'>,</span>
                         <span class='label'>skip_frames:</span> <span class='id identifier rubyid_skip_frames'>skip_frames</span> <span class='op'>+</span> <span class='int'>1</span>
  <span class='id identifier rubyid_span'>span</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
  <span class='id identifier rubyid_span'>span</span><span class='period'>.</span><span class='id identifier rubyid_start!'>start!</span>
  <span class='ivar'>@trace_data</span><span class='period'>.</span><span class='id identifier rubyid_span_map'>span_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_child_context'>child_context</span><span class='period'>.</span><span class='id identifier rubyid_span_id'>span_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_span'>span</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="this_span-instance_method">
  
    #<strong>this_span</strong>  &#x21d2; <tt><span class='object_link'><a href="SpanBuilder.html" title="OpenCensus::Trace::SpanBuilder (class)">SpanBuilder</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the span that defines this context; that is, the span that is the
parent of spans created by this context. Returns `nil` if this context is
the root and doesn&#39;t correspond to an actual span, or if the
corresponding span is remote.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SpanBuilder.html" title="OpenCensus::Trace::SpanBuilder (class)">SpanBuilder</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The span defining this context.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 218</span>

<span class='kw'>def</span> <span class='id identifier rubyid_this_span'>this_span</span>
  <span class='id identifier rubyid_get_span'>get_span</span> <span class='ivar'>@span_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trace_context-instance_method">
  
    #<strong>trace_context</strong>  &#x21d2; <tt><span class='object_link'><a href="TraceContextData.html" title="OpenCensus::Trace::TraceContextData (class)">TraceContextData</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the trace context for this span.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="TraceContextData.html" title="OpenCensus::Trace::TraceContextData (class)">TraceContextData</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 105</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trace_context'>trace_context</span>
  <span class='const'><span class='object_link'><a href="TraceContextData.html" title="OpenCensus::Trace::TraceContextData (class)">TraceContextData</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_trace_id'>trace_id</span><span class='comma'>,</span> <span class='ivar'>@span_id</span><span class='comma'>,</span> <span class='id identifier rubyid_trace_options'>trace_options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trace_id-instance_method">
  
    #<strong>trace_id</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The trace ID, as a 32-character hex string.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 114</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trace_id'>trace_id</span>
  <span class='ivar'>@trace_data</span><span class='period'>.</span><span class='id identifier rubyid_trace_id'>trace_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="trace_options-instance_method">
  
    #<strong>trace_options</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The original trace options byte used to create this span context.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opencensus/trace/span_context.rb', line 123</span>

<span class='kw'>def</span> <span class='id identifier rubyid_trace_options'>trace_options</span>
  <span class='ivar'>@trace_data</span><span class='period'>.</span><span class='id identifier rubyid_trace_options'>trace_options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Jan 12 23:34:07 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.4.1).
</div>

    </div>
  </body>
</html>